<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sticky Notes Grid — 3×3 in (Markdown + Print)</title>
  <style>
    :root {
      --page-width: 8.5in;
      --page-height: 11in;
      --cols: 2;
      --rows: 3;
      --note-size: 3in;
      --gap-x: 0.25in;
      --gap-y: 0.5in;
      --margin-left: 0.5in;
      --margin-top: 0.5in;
      --note-padding: 0.18in;
      --guide-color: #cbd5e1;
      --ui-accent: #2563eb;
      --ui-bg: #0b1020;
      --ui-surface: #111827;
      --ui-text: #e5e7eb;
      --ui-muted: #9ca3af;
      --font-stack: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font-family: var(--font-stack); color: var(--ui-text); background: radial-gradient(1200px 800px at 20% 0%, #111827 0%, #0b1020 55%, #05070f 100%); }
    .toolbar { position: sticky; top: 0; z-index: 10; backdrop-filter: blur(8px); background: rgba(17, 24, 39, 0.8); border-bottom: 1px solid #1f2937; padding: 0.6rem 0.9rem; display: grid; gap: 0.6rem; grid-template-columns: 1fr auto; }
    .toolbar .left, .toolbar .right { display: flex; gap: 0.6rem; align-items: center; flex-wrap: wrap; }
    .toolbar h1 { font-size: 1rem; font-weight: 600; margin: 0 0.6rem 0 0; color: #f3f4f6; }
    .toolbar label { font-size: 0.85rem; color: var(--ui-muted); }
    .toolbar input[type="number"], .toolbar input[type="text"] { background: #0b1220; color: #e5e7eb; border: 1px solid #243142; border-radius: 8px; padding: 0.35rem 0.5rem; outline: none; min-width: 4.5rem; }
    .toolbar input[type="checkbox"] { transform: translateY(1px); }
    .btn { background: var(--ui-accent); color: white; border: none; border-radius: 8px; padding: 0.45rem 0.7rem; font-weight: 600; cursor: pointer; transition: box-shadow 200ms ease, transform 120ms ease; }
    .btn:active { transform: translateY(1px); }
    .btn.secondary { background: #374151; }
    .sheet { width: var(--page-width); height: var(--page-height); margin: 1rem auto; background: #0a0d16; border: 1px solid #1f2937; border-radius: 12px; position: relative; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
    .grid { position: absolute; left: var(--margin-left); top: var(--margin-top); display: grid; grid-template-columns: repeat(var(--cols), var(--note-size)); grid-template-rows: repeat(var(--rows), var(--note-size)); gap: var(--gap-y) var(--gap-x); }
    body.print-guides .note { outline: 0.7pt dashed var(--guide-color); outline-offset: 0; }
    .note { width: var(--note-size); height: var(--note-size); background: white; color: #111827; border-radius: 0.05in; padding: var(--note-padding); display: grid; grid-template-rows: 1fr; position: relative; }
    .note textarea, .note .preview { width: 100%; height: 100%; border: none; outline: none; margin: 0; padding: 0; font: 12pt/1.25 Georgia, "Times New Roman", serif; background: transparent; color: inherit; resize: none; overflow: auto; }
    .note .preview { overflow-wrap: break-word; }
    @page { size: Letter; margin: 0; }
    @media print { body { background: white; } .toolbar { display: none !important; } .sheet { width: 8.5in; height: 11in; margin: 0; border: none; border-radius: 0; box-shadow: none; } .note textarea { display: none !important; } .note .preview { display: block !important; } }
  </style>
</head>
<body>
  <div class="toolbar">
    <div class="left">
      <h1>Sticky Notes Grid</h1>
      <label>Top <input id="topInput" type="number" step="0.01" min="0" value="0.5"></label>
      <label>Left <input id="leftInput" type="number" step="0.01" min="0" value="0.5"></label>
      <label>Gap X <input id="gapXInput" type="number" step="0.01" min="0" value="0.25"></label>
      <label>Gap Y <input id="gapYInput" type="number" step="0.01" min="0" value="0.50"></label>
      <label><input id="guidesToggle" type="checkbox"> Show print guides</label>
    </div>
    <div class="right">
      <button id="modeBtn" class="btn" title="Toggle Edit/Preview (Alt+E)">Toggle Preview (Alt+E)</button>
      <button id="clearBtn" class="btn secondary" title="Clear all notes">Clear</button>
      <button id="printBtn" class="btn" title="Print (Ctrl/Cmd+P)">Print</button>
    </div>
  </div>

  <main class="sheet">
    <section id="grid" class="grid"></section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
  <script>
    (function(){
      const COLS=2,ROWS=3,NOTE_COUNT=COLS*ROWS,STORAGE_KEY='sticky-notes-v1';
      const grid=document.getElementById('grid'),modeBtn=document.getElementById('modeBtn'),clearBtn=document.getElementById('clearBtn'),printBtn=document.getElementById('printBtn');
      const topInput=document.getElementById('topInput'),leftInput=document.getElementById('leftInput'),gapXInput=document.getElementById('gapXInput'),gapYInput=document.getElementById('gapYInput'),guidesToggle=document.getElementById('guidesToggle');
      let editMode=true;
      function applySettings(){document.documentElement.style.setProperty('--margin-top',topInput.value+'in');document.documentElement.style.setProperty('--margin-left',leftInput.value+'in');document.documentElement.style.setProperty('--gap-x',gapXInput.value+'in');document.documentElement.style.setProperty('--gap-y',gapYInput.value+'in');document.body.classList.toggle('print-guides',guidesToggle.checked);}
      function createNote(i,text=''){const note=document.createElement('article');note.className='note';const ta=document.createElement('textarea');ta.value=text;const pv=document.createElement('div');pv.className='preview';note.append(ta,pv);return note;}
      function saveAll(){const data=[];grid.querySelectorAll('textarea').forEach(t=>data.push(t.value));localStorage.setItem(STORAGE_KEY,JSON.stringify(data));}
      function loadAll(){try{const raw=JSON.parse(localStorage.getItem(STORAGE_KEY));return Array.isArray(raw)?raw:Array(NOTE_COUNT).fill('');}catch{return Array(NOTE_COUNT).fill('');}}
      function setMode(isEdit){editMode=isEdit;grid.querySelectorAll('.note').forEach(n=>{const ta=n.querySelector('textarea'),pv=n.querySelector('.preview');if(isEdit){ta.style.display='block';pv.style.display='none';}else{ta.style.display='none';pv.style.display='block';pv.innerHTML=DOMPurify.sanitize(marked.parse(ta.value||''));}});}
      function init(){const vals=loadAll();for(let i=0;i<NOTE_COUNT;i++){grid.appendChild(createNote(i,vals[i]));}setMode(true);applySettings();}
      modeBtn.addEventListener('click',()=>setMode(!editMode));clearBtn.addEventListener('click',()=>{if(confirm('Clear all notes?')){localStorage.removeItem(STORAGE_KEY);grid.querySelectorAll('textarea').forEach(t=>t.value='');saveAll();if(!editMode)setMode(false);}});
      printBtn.addEventListener('click',()=>window.print());[topInput,leftInput,gapXInput,gapYInput].forEach(inp=>inp.addEventListener('input',applySettings));guidesToggle.addEventListener('change',applySettings);
      document.addEventListener('keydown',e=>{if(e.altKey&&e.key.toLowerCase()==='e'){e.preventDefault();setMode(!editMode);}});
      grid.addEventListener('input',()=>saveAll());init();})();
  </script>
</body>
</html>
